<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Lokasyon Bulucu</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background-color: #f4f4f4;
        }
        #map { 
            height: 500px; 
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .location-list { 
            max-height: 600px; 
            overflow-y: auto; 
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .location-item { 
            cursor: pointer; 
            transition: all 0.3s; 
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .location-item:hover { 
            background-color: #f0f0f0; 
            transform: translateX(5px);
        }
        .route-btn {
            margin-left: 10px;
        }
        .search-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .highlight {
            background-color: #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-4">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="search-container mb-4">
                    <div class="input-group mb-3">
                        <input type="text" id="searchInput" class="form-control form-control-lg" placeholder="Konum ara...">
                    </div>
                </div>
            </div>
        </div>

        <div class="row justify-content-center">
            <div class="col-md-10">
                <div id="locationList" class="location-list p-3 mb-3"></div>
                <div id="map" class="mb-4"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Tüm lokasyonlar (Türkçe ve İngilizce isimlendirmeler)
        const allLocations = [
            { "name": "AYDIN ŞUBE ÖNÜ-2", "lat": 37.8503, "lng": 27.843815 },
    { "name": "DOGU GAZİ BULVARI-1/AYDIN", "lat": 37.849827, "lng": 27.845825 },
    { "name": "İL TELEKOM MÜD. 2/MANİSA", "lat": 38.614831, "lng": 27.4274 },
    { "name": "BORNOVA MUSTAFA KEMAL CAD-2/İZMİR", "lat": 38.464203, "lng": 27.214682 },
    { "name": "AHMET RAGIP ÜZÜMCÜ İ.Ö.O./İZMİR", "lat": 38.393257, "lng": 27.118515 },
    { "name": "ALKİM AŞ YANI/İZMİR", "lat": 38.460258, "lng": 27.3693 },
    { "name": "TİRE PARK AVM/İZMİR", "lat": 38.095963, "lng": 27.728183 },
    { "name": "İNÖNÜ CADDESİ ALİAĞA/İZMİR", "lat": 38.792868, "lng": 26.966217 },
    { "name": "İŞ MERKEZİ KARŞISI EVKA 5 -ÇİĞLİ/İZMİR", "lat": 38.518486, "lng": 27.05539 },
    { "name": "NURİYE MAHALLESİ/SARUHANLI/MANİSA", "lat": 38.761934, "lng": 27.689452 },
    { "name": "İNÖNÜ CAD HATAY/İZMİR", "lat": 38.402864, "lng": 27.116137 },
    { "name": "BERGAMA SANAYİ SİTESİ/İZMİR", "lat": 39.110527, "lng": 27.190968 },
    { "name": "MİMAR SİNAN MAH/AYDIN", "lat": 37.851433, "lng": 27.814227 },
    { "name": "DURSUNBEY/BALIKESİR", "lat": 39.584515, "lng": 28.627007 },
    { "name": "ADNAN MENDERES HAVALİMANI İÇ HATLAR TERMİNALİ", "lat": 38.292126, "lng": 27.147522 },
    { "name": "BORNOVA 101 EVLER APARTMANI/İZMİR", "lat": 38.460989, "lng": 27.20091 },
    { "name": "ÇAMDİBİ BORNOVA/İZMİR", "lat": 38.435237, "lng": 27.192973 },
    { "name": "HARMANYERİ CAD BERGAMA/İZMİR", "lat": 39.113441, "lng": 27.178392 },
    { "name": "TELEKOM KARŞIYAKA/İZMİR", "lat": 38.466053, "lng": 27.120317 },
    { "name": "OSMANGAZİ MAHALLESİ/BAYRAKLI", "lat": 38.473995, "lng": 27.185656 },
    { "name": "BALIKESİR HÜKÜMET KONAĞI", "lat": 39.645606, "lng": 27.884179 },
    { "name": "SOYAK MAVİŞEHİR KONUTLARI-KARŞIYAKA/İZMİR", "lat": 38.477947, "lng": 27.07607 },
    { "name": "BUCA ÇAMLIKULE MAHALLESİ/İZMİR", "lat": 38.374325, "lng": 27.168259 },
    { "name": "MENDERES KAPALI PAZARYERİ /İZMİR", "lat": 38.255696, "lng": 27.139583 },
    { "name": "DİKİLİ SALİHLERALTI KOOPERATİFİ/İZMİR", "lat": 39.157947, "lng": 26.822806 },
    { "name": "ÇİĞLİ METRO GROSS MARKET/İZMİR", "lat": 38.489359, "lng": 27.070977 },
    { "name": "BAYRAKLI ALPASLAN MAHALLESİ/İZMİR", "lat": 38.469814, "lng": 27.167265 },
    { "name": "ESKİ İZMİR CAD. KAVŞAK/İZMİR", "lat": 38.389145, "lng": 27.117002 },
    { "name": "ÇAMDİBİ BURAK REİS CAD./İZMİR", "lat": 38.437664, "lng": 27.188725 },
    { "name": "KÖPRÜBAŞI BORLU BELDESİ / MANİSA", "lat": 38.7527, "lng": 28.467628 },
    { "name": "KUŞADASI BELEDİYE BİNASI ÖNÜ", "lat": 37.857956, "lng": 27.260777 },
    { "name": "AYNI ALİ MAH.YUNUS EMRE/MANİSA", "lat": 38.613427, "lng": 27.418136 },
    { "name": "CUMHURİYET MEYDANI BAĞYURDU/İZMİR", "lat": 38.414858, "lng": 27.6367904 },
    { "name": "SÖKE NOVADA AVM/AYDIN", "lat": 37.767061, "lng": 27.425567 },
    { "name": "GÜLTEPE-KONAK/İZMİR", "lat": 38.415962, "lng": 27.171835 },
    { "name": "DEMİRCİ MENDERES BULVARI/MANİSA", "lat": 39.038673, "lng": 28.657711 },
    { "name": "ÇAMLIPARK BUCA KOOPERATİFİ/İZMİR", "lat": 38.369743, "lng": 27.191575 },
    { "name": "ADNAN MENDERES BULVARI ŞUBESİ KARŞISI/AYDIN", "lat": 37.842815, "lng": 27.844748 },
    { "name": "İZMİR ÖZDİLEK AVM/İZMİR", "lat": 38.410705, "lng": 27.031433 },
    { "name": "BALIKESİR DEVLET HASTANESİ", "lat": 39.653241, "lng": 27.891585 },
    { "name": "BÜYÜKBELEN MAH./SARUHANLI/MANİSA", "lat": 38.640714, "lng": 27.818015 },
    { "name": "DR. SUAT ZEREN HASTANESİ/İZMİR", "lat": 38.423603, "lng": 27.164032 },
    { "name": "BAHRİYE ÜÇOK BULVARI/KARŞIYAKA", "lat": 38.460686, "lng": 27.11449 },
    { "name": "SALİHLİ DEVLET HASTANESİ/MANİSA", "lat": 38.479418, "lng": 28.140038 },
    { "name": "BAYRAKLI ÇAY MAH./İZMİR", "lat": 38.470868, "lng": 27.180473 },
    { "name": "BORNOVA ATATÜRK MAH./ İZMİR", "lat": 38.47825, "lng": 27.206152 },
    { "name": "İZELTAŞ/İZMİR", "lat": 38.432925, "lng": 27.229278 },
    { "name": "ÇAKINBERK PETROL ÜRÜNLERİ KARESİ BALIKESİR", "lat": 39.657143, "lng": 27.848263 },
    { "name": "OPET PRIME PETROL URLA/İZMİR", "lat": 38.371248, "lng": 26.85093 },
    { "name": "KUŞADASI ÇARŞIİÇİ/AYDIN", "lat": 37.858951, "lng": 27.258257 },
    { "name": "SALİHLİ MİGROS/MANİSA", "lat": 38.483044, "lng": 28.124996 },
    { "name": "MİGROS GAZİEMİR/İZMİR", "lat": 38.324571, "lng": 27.136128 },
    { "name": "BATISÖKE FABRİKASI", "lat": 37.771885, "lng": 27.432218 },
    { "name": "İZMİR CADDESİ KARAKÖY-MANİSA", "lat": 38.60958, "lng": 27.41549 },
    { "name": "KÜÇÜKBAY YAĞ VE DETERJAN SAN. A.Ş/İZMİR", "lat": 38.453412, "lng": 27.195968 },
    { "name": "BAHÇELİEVLER MAH./BALIKESİR", "lat": 39.638893, "lng": 27.887292 },
    { "name": "BAĞARASI MAHALLESİ SÖKE /AYDIN", "lat": 37.705201, "lng": 27.545063 },
    { "name": "AGORA AVM/İZMİR", "lat": 38.394659, "lng": 27.052932 },
    { "name": "KAPALI SPOR/BALIKESİR", "lat": 39.643693, "lng": 27.885054 },
    { "name": "MİGROS AVM-DİKİLİ/İZMİR", "lat": 39.07695, "lng": 26.892258 },
    { "name": "MUSTAFA YAZICI CADDESİ/BERGAMA /İZMİR", "lat": 39.115866, "lng": 27.176991 },
    { "name": "TURGUTLU ÖZDİLEK AVM/ MANİSA", "lat": 38.487659, "lng": 27.693046 },
    { "name": "DOĞUŞ CAD.BUCA/ İZMİR", "lat": 38.377065, "lng": 27.189064 },
    { "name": "CUNDA ADASI/AYVALIK", "lat": 39.332073, "lng": 26.655013 },
    { "name": "BALÇOVA ILICA TERMAL TESİS/İZMİR", "lat": 38.389238, "lng": 27.037752 },
    { "name": "AKHİSAR ÇAĞLAK ANADOLU LİSESİ/MANİSA", "lat": 38.926101, "lng": 27.834645 },
    { "name": "ESKİ İZMİR CAD.-KARABAĞLAR/İZMİR", "lat": 38.363928, "lng": 27.105594 },
    { "name": "VALİ ŞENTÜRK CD.DİKİLİ/İZMİR", "lat": 38.934704, "lng": 26.935513 },
    { "name": "ERYONCA SİTESİ/İZMİR", "lat": 38.460816, "lng": 27.201302 },
    { "name": "KARŞIYAKA TİYATRO SOKAĞI/İZMİR", "lat": 38.457684, "lng": 27.118671 },
    { "name": "GAZİEMİR  5M MİGROS AVM/İZMİR", "lat": 38.312661, "lng": 27.143263 },
    { "name": "BÜYÜKÇİĞLİ 5M MİGROS AVM/İZMİR", "lat": 38.482031, "lng": 27.055764 },
    { "name": "KISIKKÖY MOBİLYACILAR SİTESİ/İZMİR", "lat": 38.277676, "lng": 27.193306 },
    { "name": "KLİMASAN/MANİSA", "lat": 38.620601, "lng": 27.363333 },
    { "name": "BORNOVA 5M MİGROS AVM/İZMİR", "lat": 38.458268, "lng": 27.237306 },
    { "name": "KUŞADASI MMM MİGROS/AYDIN", "lat": 37.847447, "lng": 27.258866 },
    { "name": "OTOGAR/MANİSA", "lat": 38.639402, "lng": 27.443481 },
    { "name": "KUŞADASI AVM/AYDIN", "lat": 37.8088, "lng": 27.276564 },
    { "name": "SELENDİ/MANİSA", "lat": 38.743465, "lng": 28.866405 },
    { "name": "HÜRRİYET BULVARI/İZMİR", "lat": 38.425934, "lng": 27.140118 },
    { "name": "KUŞADASI ÇEVREYOLU MİGROS/AYDIN", "lat": 37.869602, "lng": 27.27475 },
    { "name": "İZMİRPARK AVM/ İZMİR", "lat": 38.403482, "lng": 27.129246 },
    { "name": "BUCA ERDEM CADDESİ/İZMİR", "lat": 38.38222, "lng": 27.182405 },
    { "name": "ALPER PETROL ÇEŞME/İZMİR", "lat": 38.329186, "lng": 26.422135 },
    { "name": "ADNAN MENDERES HAVALİMANI DIŞ HATLAR/İZMİR", "lat": 38.295185, "lng": 27.14724 },
    { "name": "SOĞUKKUYU MİGROS-BAYRAKLI/İZMİR", "lat": 38.478127, "lng": 27.117724 },
    { "name": "MURADİYE MAHALLESİ/MANİSA", "lat": 38.659342, "lng": 27.335958 },
    { "name": "TÜRKİYE KÖMÜR İŞLETMELERİ KURUMU- SOMA/MANİSA", "lat": 39.189236, "lng": 27.613638 },
    { "name": "YELKİ MAHALLESİ-GÜZELBAHÇE/İZMİR", "lat": 38.343139, "lng": 26.865441 },
    { "name": "KEMALPAŞA ŞEHİR PARKI/İZMİR", "lat": 38.428555, "lng": 27.413763 },
    { "name": "KUŞADASI 5M MİGROS AVM/AYDIN", "lat": 37.811574, "lng": 27.281614 },
    { "name": "KÜÇÜKYALI MİTHATPAŞA CADDESİ/KONAK", "lat": 38.409214, "lng": 27.11155 },
    { "name": "ALİAĞA DEVLET HASTANESİ/İZMİR", "lat": 38.787255, "lng": 26.975845 },
    { "name": "BORNOVA METRO ÇIKIŞI 5", "lat": 38.458917, "lng": 27.213067 },
    { "name": "ALAŞEHİR SÜLEYMAN DEMİREL BLV./MANİSA", "lat": 38.34943, "lng": 28.529436 },
    { "name": "SEYFETTİN BEY CADDESİ MANİSA", "lat": 38.61404, "lng": 27.438524 },
    { "name": "SELÇUK PAZARYERİ/İZMİR", "lat": 37.949074, "lng": 27.370132 },
    { "name": "BUCA FIRAT MAHALLESİ/İZMİR", "lat": 38.373722, "lng": 27.150446 },
    { "name": "KARŞIYAKA ORDU BULVARI/İZMİR", "lat": 38.46704, "lng": 27.11316 },
    { "name": "ÖZEL ÇINARLI HASTANESİ/İZMİR", "lat": 38.440673, "lng": 27.172595 },
    { "name": "ABDULLAH AYNAOĞLU PARKI/BALIKESİR", "lat": 39.635647, "lng": 27.891058 },
    { "name": "İZMİR CADDESİ ŞEHZADELER/MANİSA", "lat": 38.609801, "lng": 27.424195 },
    { "name": "KARABAĞLAR YUNUS EMRE MAH./İZMİR", "lat": 38.374078, "lng": 27.129762 },
    { "name": "TURGUTLU DEVLET HASTANESİ/MANİSA", "lat": 38.49168, "lng": 27.109837 },
    { "name": "9. ANA JET ÜS KOMUTANLIĞI/BALIKESİR", "lat": 39.634314, "lng": 27.911612 },
    { "name": "NUR APARTMANI MİTHATPAŞA\İZMİR", "lat": 38.4063, "lng": 27.10231 },
    { "name": "CUMHURİYET MEYDANI ALAŞEHİR / MANİSA", "lat": 38.354324, "lng": 28.515595 },
    { "name": "PHİLSA A.Ş./İZMİR", "lat": 38.1937829, "lng": 27.3620276 },
    { "name": "BUCA ÇAMLIK MİGROS /İZMİR", "lat": 38.401608, "lng": 27.156693 },
    { "name": "SEVGİ HASTANESİ/BALIKESİR", "lat": 39.6657, "lng": 27.909489 },
    { "name": "TURGUTLU ATATÜRK BULVARI/MANİSA", "lat": 38.497242, "lng": 27.705818 },
    { "name": "CAN HASTANESİ/MANİSA", "lat": 38.479872, "lng": 28.160158 },
    { "name": "ÇİFTLİKKÖY SAHİL ÇEŞME/İZMİR", "lat": 38.294342, "lng": 26.278886 },
    { "name": "ŞÜKRÜ SARAÇOĞLU CAD/İZMİR", "lat": 38.406194, "lng": 27.117762 },
    { "name": "YENİFOÇA-ORUÇ REİS CAD/İZMİR", "lat": 38.737222, "lng": 26.833499 },
    { "name": "KIRKAĞAÇ BELEDİYESİ/MANİSA", "lat": 39.106641, "lng": 27.674208 },
    { "name": "TİBAŞ EVLERİ/İZMİR", "lat": 38.401297, "lng": 27.099491 },
    { "name": "ÖDEMİŞ DEVLET HASTANESİ/İZMİR", "lat": 38.235052, "lng": 27.978416 },
    { "name": "MİSAK-I MİLLİ İLKÖĞRETİM OKULU/MANİSA", "lat": 38.92187, "lng": 27.835883 },
    { "name": "SÖKE GARNİZON KOMUTANLIĞI/AYDIN", "lat": 37.735772, "lng": 27.399334 },
    { "name": "MİGROS POLİGON İNÖNÜ CAD./İZMİR", "lat": 38.393719, "lng": 27.081851 },
    { "name": "COMPONENTA DÖKÜMCÜLÜK MANİSA OSB", "lat": 38.615242, "lng": 27.362192 },
    { "name": "ŞEHİT ŞAHİN BEYCAN PARKI/GÖMEÇ", "lat": 39.386755, "lng": 26.838959 },
    { "name": "KOÇARLI İLÇESİ/AYDIN", "lat": 37.76066, "lng": 27.706223 },
    { "name": "KUŞADASI YUVAM SİTESİ AYDIN", "lat": 37.796818, "lng": 27.273886 },
    { "name": "MODEKA İŞ MERKEZİ-KARABAĞLAR/İZMİR", "lat": 38.389057, "lng": 27.134313 },
    { "name": "EFESUS OUTLET ÇİĞLİ", "lat": 38.519455, "lng": 27.038435 },
    { "name": "GAR ALSANCAK/İZMİR", "lat": 38.438997, "lng": 27.14808 },
    { "name": "ALİ FUAT CEBESOY MAH.KARABAĞLAR/İZMİR", "lat": 38.376735, "lng": 27.10734 },
    { "name": "BALÇOVA ATA CAD/İZMİR", "lat": 38.386298, "lng": 27.058625 },
    { "name": "NARLIDERE MİTHATPAŞA CAD/İZMİR", "lat": 38.394886, "lng": 27.003944 },
    { "name": "ŞEMİKLER GÜRMAR KARŞIYAKA/ İZMİR", "lat": 38.472713, "lng": 27.09822 },
    { "name": "MİTHATPAŞA CAD-KONAK/İZMİR", "lat": 38.403371, "lng": 27.09709 },
    { "name": "SELWAY OUTLET-1/İZMİR", "lat": 38.377504, "lng": 27.07275 },
    { "name": "IŞIKKENT AYAKKABICILAR SİTESİ\İZMİR", "lat": 38.4288527, "lng": 27.237257 },
    { "name": "DEMİRKÖPRÜ METRO ÇIKIŞI/İZMİR", "lat": 38.4676, "lng": 27.096754 },
    { "name": "1395 SOKAK KAHRAMANLAR/İZMİR", "lat": 38.428679, "lng": 27.149754 },
    { "name": "SAKARYA CADDESİ-BALÇOVA/İZMİR", "lat": 38.38601, "lng": 27.053978 },
    { "name": "YÜKSEK TEKNOLOJİ ENSTİTÜSÜ MERKEZ CAFE/İZMİR", "lat": 38.321481, "lng": 26.63399 },
    { "name": "BELEDİYE İŞ MERKEZİ MENDERES/İZMİR", "lat": 38.25016, "lng": 27.13161 },
    { "name": "ŞİRİNYER MEHMET AKİF CADDESİ/İZMİR", "lat": 38.39338, "lng": 27.143047 },
    { "name": "DİNKÇİLER MAHALLESİ ALTIEYLÜL BELEDİYESİ", "lat": 39.63767, "lng": 27.880382 },
    { "name": "YAMANLAR MAHALLESİ-BAYRAKLI/ İZMİR", "lat": 38.480915, "lng": 27.13275 },
    { "name": "URLA İSKELE MEVKİ/İZMİR", "lat": 38.363987, "lng": 26.770745 },
    { "name": "ÖZDERE TOTAL AKARYAKIT-GÜMÜLDÜR/İZMİR", "lat": 38.047536, "lng": 27.055394 },
    { "name": "MURAT BEY MAH. ALPYILMAZLAR MARKET TORBALI/İZMİR", "lat": 38.157262, "lng": 27.352169 },
    { "name": "LENA PETROL/YENİ DÖRTYOL", "lat": 37.837645, "lng": 27.845035 },
    { "name": "ÇEŞME HÜKÜMET KONAĞI/İZMİR", "lat": 38.32622, "lng": 26.30834 },
    { "name": "ATATÜRK MAH.-GAZİEMİR/İZMİR", "lat": 38.297986, "lng": 27.173995 },
    { "name": "KAZIM KARABEKİR CAD./BORNOVA-İZMİR", "lat": 38.464226, "lng": 27.223666 },
    { "name": "KUŞADASI HALK PAZARI/AYDIN", "lat": 37.78826, "lng": 27.276018 },
    { "name": "SÖKE FEHİME FAİK KOCAGÖZ DEVLET HASTANESİ/AYDIN", "lat": 37.764725, "lng": 27.402885 },
    { "name": "DOĞUMEVİ/MANİSA", "lat": 38.618197, "lng": 27.435066 },
    { "name": "İVRİNDİ/BALIKESİR", "lat": 39.582276, "lng": 27.487817 },
    { "name": "BORNOVA KAMİL TUNCA BULVARI/İZMİR", "lat": 38.431904, "lng": 27.192554 },
    { "name": "MEVLANA MAH-BORNOVA/İZMİR", "lat": 38.448289, "lng": 27.230923 },
    { "name": "SAKARYA CADDESİ-BAYRAKLI/İZMİR", "lat": 38.458731, "lng": 27.190356 },
    { "name": "MAVİ KÖRFEZ İŞ MERKEZİ/İZMİR", "lat": 38.503835, "lng": 27.061639 },
    { "name": "GÖLMARMARA İLÇESİ/MANİSA", "lat": 38.714338, "lng": 27.918544 },
    { "name": "İBRAHİM GÖKÇEN BULVARI/MANİSA", "lat": 38.617902, "lng": 27.42747 },
    { "name": "EVKA-2/İZMİR", "lat": 38.49599, "lng": 27.08874 },
    { "name": "HALKAPINAR İZBAN İSTASYONU/İZMİR", "lat": 38.435026, "lng": 27.168604 },
    { "name": "MUSTAFA KİRAZOĞLU DEVLET HASTANESİ/AKHİSAR", "lat": 38.913225, "lng": 27.831373 },
    { "name": "TİRE ÖĞRETMENEVİ/İZMİR", "lat": 38.089121, "lng": 27.731589 },
    { "name": "PINARBAŞI ÇARŞI İÇİ/İZMİR", "lat": 38.42786, "lng": 27.264845 },
    { "name": "EGEMENLİK MAH.-BORNOVA /İZMİR", "lat": 38.426761, "lng": 27.244146 },
    { "name": "FOÇA BAĞARASI/İZMİR", "lat": 38.65951, "lng": 26.850313 },
    { "name": "REŞATBEY MAHALLESİ AKHİSAR/MANİSA", "lat": 38.923113, "lng": 27.832453 },
    { "name": "KEPSUT/BALIKESİR", "lat": 39.686804, "lng": 28.156801 },
    { "name": "İKÇÜ ÇİĞLİ/İZMİR", "lat": 38.513999, "lng": 27.031807 },
    { "name": "KARŞIYAKA CUMHURİYET MH.", "lat": 38.482994, "lng": 27.097298 },
    { "name": "MENDERES CADDESİ-BUCA/İZMİR", "lat": 38.390875, "lng": 27.159383 },
    { "name": "KASABA AVM/İZMİR", "lat": 38.677247, "lng": 27.015842 },
    { "name": "MEVLANA MAHALLESİ/MANİSA", "lat": 38.625156, "lng": 27.38946 },
    { "name": "AYVALIK 5M MİGROS AVM", "lat": 39.328926, "lng": 26.712873 },
    { "name": "MAGNESİA AVM/MANİSA", "lat": 38.616574, "lng": 27.400661 },
    { "name": "BORNOVA FORUM AVM-1/İZMİR", "lat": 38.449855, "lng": 27.208798 },
    { "name": "GAZİEMİR OUTLET CENTER/İZMİR", "lat": 38.357026, "lng": 27.134771 },
    { "name": "EFELER 5M MİGROS AVM/AYDIN", "lat": 37.846767, "lng": 27.839623 },
    { "name": "KUŞADASI GÜZELÇAMLI/AYDIN", "lat": 37.714686, "lng": 27.222463 },
    { "name": "SAVAŞTEPE/BALIKESİR", "lat": 39.38227, "lng": 27.65559 },
    { "name": "EGE ÜNİVERSİTESİ HASTANESİ/İZMİR", "lat": 38.456344, "lng": 27.210473 },
    { "name": "KEMALPAŞA ARMUTLU BELDESİ/İZMİR", "lat": 38.407917, "lng": 27.53233 },
    { "name": "254 SOKAK KOZAĞAÇ BUCA/İZMİR", "lat": 38.377495, "lng": 27.169241 },
    { "name": "GAZİEMİR EMLAK BANKASI KONUTLARI/İZMİR", "lat": 38.310905, "lng": 27.13759 },
    { "name": "İLLER BANKASI/İZMİR", "lat": 38.3995417, "lng": 27.1276988 },
    { "name": "MİGROS ÖNÜ-ÖDEMİŞ/İZMİR", "lat": 38.22792, "lng": 27.979588 },
    { "name": "SELWAY OUTLET-2/İZMİR", "lat": 38.377036, "lng": 27.074062 },
    { "name": "NATO/İZMİR ŞUBESİ-2 (ÖNÜ)", "lat": 38.392066, "lng": 27.144336 },
    { "name": "BUCA DOĞUMEVİ/İZMİR", "lat": 38.375896, "lng": 27.180462 },
    { "name": "KARİZMA PAZARI/BALIKESİR", "lat": 39.663542, "lng": 27.896513 },
    { "name": "KUŞADASI SALİH KİLLİ PARKI/AYDIN", "lat": 37.857164, "lng": 27.263483 },
    { "name": "ALİAĞA HÜKÜMET CADDESİ/İZMİR", "lat": 38.802513, "lng": 26.972536 },
    { "name": "YÜKSEK TEKNOLOJİ ENSTİTÜSÜ/İZMİR", "lat": 38.319141, "lng": 26.643062 },
    { "name": "ZÜBEYDE HANIM MAHALLESİ KARŞIYAKA/İZMİR", "lat": 38.49168, "lng": 27.109837 },
    { "name": "EVKA-3/İZMİR", "lat": 38.465459, "lng": 27.244767 },
    { "name": "KARŞIYAKA METRO İSTASYONU D/İZMİR", "lat": 38.458049, "lng": 27.115107 },
    { "name": "KINIK POYRACIK BELDESİ/İZMİR", "lat": 39.090574, "lng": 27.348856 },
    { "name": "ÜÇYOL MEYDAN/İZMİR", "lat": 38.40556, "lng": 27.120362 },
    { "name": "HAVA HASTANESİ KARŞISI/İZMİR", "lat": 38.398556, "lng": 27.076344 },
    { "name": "FOLKART TOWERS BAYRAKLI/İZMİR", "lat": 38.452933, "lng": 27.177718 },
    { "name": "BUCA KOOPERATİFİ BİRLİK SİTESİ/İZMİR", "lat": 38.367241, "lng": 27.18716 },
    { "name": "KUŞADASI ALTIN GÜVERCİN SİTESİ/AYDIN", "lat": 37.853039, "lng": 27.255081 },
    { "name": "BORNOVA KOÇTAŞ/İZMİR", "lat": 38.446971, "lng": 27.185231 },
    { "name": "HAVA TEKNİK OKULAR -2/İZMİR", "lat": 38.320571, "lng": 27.155261 },
    { "name": "TORBALI HÜKÜMET KONAĞI/İZMİR", "lat": 38.154754, "lng": 27.35737 },
    { "name": "İZMİR FUARI LOZAN KAPISI/İZMİR", "lat": 38.430326, "lng": 27.141873 },
    { "name": "BALYA İLÇESİ/BALIKESİR", "lat": 39.748889, "lng": 27.576601 },
    { "name": "ŞİRİNYER VERGİ DAİRESİ KARŞISI/İZMİR", "lat": 38.393935, "lng": 27.160745 },
    { "name": "ATEŞ ÇELİK/İZMİR", "lat": 38.965965, "lng": 27.040915 },
    { "name": "GAZİEMİR METRO GROSS MARKET/İZMİR", "lat": 38.316912, "lng": 27.13792 },
    { "name": "PEHLİVANOĞLU MARKET YANI/MANİSA", "lat": 38.612391, "lng": 27.411087 },
    { "name": "TRT İZMİR BÖLGE MÜDÜRLÜĞÜ KARŞISI/İZMİR", "lat": 38.431874, "lng": 27.149931 },
    { "name": "MENEMEN ULUKENT ŞEHİR PARKI/İZMİR", "lat": 38.554595, "lng": 27.049628 },
    { "name": "ÖZEL KENT HASTANESİ/İZMİR", "lat": 38.489569, "lng": 27.05218 },
    { "name": "DR. OETKER GIDA/İZMİR", "lat": 38.20323, "lng": 27.246687 },
    { "name": "SALIPAZARI MİGROS ÖNÜ/BALIKESİR", "lat": 39.653816, "lng": 27.886646 },
    { "name": "İZMİR ADLİYESİ", "lat": 38.449541, "lng": 27.177771 },
    { "name": "OPTİMUM AVM/İZMİR", "lat": 38.338912, "lng": 27.134439 },
    { "name": "EKOL HASTANESİ-ÇİĞLİ/İZMİR", "lat": 38.485964, "lng": 27.059519 },
    { "name": "YENİ GİRNE BULVARI-KARŞIYAKA/İZMİR", "lat": 38.475976, "lng": 27.115492 },
    { "name": "ÇEŞME MARİNA/İZMİR", "lat": 38.319403, "lng": 26.301741 },
    { "name": "GÜMÜŞPALA/İZMİR", "lat": 38.468626, "lng": 27.13689 },
    { "name": "BUCA KOOPERATİF MİGROS", "lat": 38.370335, "lng": 27.17864 },
    { "name": "ESEN APARTMANI HIFZISIHHA/İZMİR", "lat": 38.392586, "lng": 27.087775 },
    { "name": "BERGAMA MALTEPE MAH/İZMİR", "lat": 39.106497, "lng": 27.168365 },
    { "name": "ÖZDERE ÇARŞI MERKEZİ-GÜMÜLDÜR/İZMİR", "lat": 38.020724, "lng": 27.095906 },
    { "name": "BALIKESİR OTOBÜS TERMİNALİ", "lat": 39.677127, "lng": 27.942212 },
    { "name": "HÜRRİYET MAHALLESİ MENDERES CAD/BUCA/İZMİR", "lat": 38.399353, "lng": 27.14954 },
    { "name": "FORUM AVM/AYDIN", "lat": 37.847186, "lng": 27.861182 },
    { "name": "ÜÇKUYULAR OPET İSTASYONU/İZMİR", "lat": 38.397528, "lng": 27.067325 },
    { "name": "DALAN KİMYA/İZMİR", "lat": 38.4390114, "lng": 27.2458637 },
    { "name": "ATAŞEHİR MAH.-ÇİĞLİ/İZMİR", "lat": 38.490521, "lng": 27.062508 },
    { "name": "AŞAĞI ÇOBANİSA/MANİSA", "lat": 38.566224, "lng": 27.570632 },
    { "name": "ÇIRPI BELDESİ BAYINDIR/İZMİR", "lat": 38.169088, "lng": 27.498702 },
    { "name": "KARŞIYAKA KİLİSE SOKAĞI/İZMİR", "lat": 38.455353, "lng": 27.114962 },
    { "name": "SALİHLİ PAZARYERİ/MANİSA", "lat": 38.486148, "lng": 28.136372 },
    { "name": "AKDENİZ CHEMSON KİMYA\İZMİR", "lat": 38.459694, "lng": 27.358268 },
    { "name": "PAŞAKÖY MAHALLESİ-SARUHANLI/MANİSA", "lat": 38.774103, "lng": 27.526245 },
    { "name": "DÖRTYOL MİGROS SEFERİHİSAR/İZMİR", "lat": 38.194634, "lng": 26.833709 },
    { "name": "YENİ ŞAKRAN BELDESİ/İZMİR", "lat": 38.885455, "lng": 27.066998 },
    { "name": "ZİÇEV/MANİSA", "lat": 38.618595, "lng": 27.39858 },
    { "name": "OTOKENT/İZMİR", "lat": 38.350098, "lng": 27.140842 },
    { "name": "YUNUSEMRE MİGROS/MANİSA", "lat": 38.61808, "lng": 27.41099 },
    { "name": "75.YIL MAH.BAYRAKLI/İZMİR", "lat": 38.472889, "lng": 27.159458 },
    { "name": "KARABAĞLAR DOSTLUK BULVARI/İZMİR", "lat": 38.377601, "lng": 27.130983 },
    { "name": "BUCA YENİGÜN MAHALLESİ/İZMİR", "lat": 38.377567, "lng": 27.163946 },
    { "name": "ESKİ İZMİR CAD.DALGIÇLAR FIRINI BOZYAKA/İZMİR", "lat": 38.391463, "lng": 27.125305 },
    { "name": "KARŞIYAKA YALI MAHALLESİ/İZMİR", "lat": 38.46809, "lng": 27.091732 },
    { "name": "DOĞU ÜÇYOL METRO İSTASYONU/İZMİR", "lat": 38.405928, "lng": 27.120896 },
    { "name": "BOZYAKA EĞİTİM VE ARAŞTIRMA HASTANESİ YANI/İZMİR", "lat": 38.397829, "lng": 27.127702 },
    { "name": "KOLDERE MAH./SARUHANLI/MANİSA", "lat": 38.656529, "lng": 27.634735 },
    { "name": "SOMA BEŞYOL KAVŞAĞI/MANİSA", "lat": 39.185444, "lng": 27.608816 },
    { "name": "ARMUTCUK PAZARYERİ/AYVALIK", "lat": 39.332592, "lng": 26.703344 },
    { "name": "5M MANİSA", "lat": 38.615242, "lng": 27.390182 },
    { "name": "BUCA AKINCILAR MAHALLESİ/İZMİR", "lat": 38.3856, "lng": 27.144348 },
    { "name": "HAVA TEKNİK OKULAR -1/İZMİR", "lat": 38.309184, "lng": 27.157168 },
    { "name": "AVNİ GEMİCİOĞLU CADDESİ/MANİSA", "lat": 38.61731, "lng": 27.420204 },
    { "name": "URLA ÇEŞMEALTI/İZMİR", "lat": 38.393945, "lng": 26.748276 },
    { "name": "BOZYAKA/İZMİR", "lat": 38.395527, "lng": 27.127084 },
    { "name": "MAVİŞEHİR 1. ETAP TOPLU YÖNETİMİ/İZMİR", "lat": 38.469124, "lng": 27.08002 },
    { "name": "GÖRECE KÖYÜ/İZMİR", "lat": 38.28972, "lng": 27.12675 },
    { "name": "TİRE TOPLU KONUTLAR/İZMİR", "lat": 38.099976, "lng": 27.722446 },
    { "name": "ÖREN BELDESİ/KEMALPAŞA", "lat": 38.40871, "lng": 27.58522 },
    { "name": "SIĞACIK BELDESİ-SEFERİHİSAR/İZMİR", "lat": 38.193011, "lng": 26.785855 },
    { "name": "SALİHLİ ATATÜRK CAD./MANİSA", "lat": 38.482131, "lng": 28.150768 },
    { "name": "SOMA CAD./BALIKESİR", "lat": 39.628976, "lng": 27.880716 },
    { "name": "DEFTERDARLIK/BALIKESİR", "lat": 39.644962, "lng": 27.889318 },
    { "name": "BALIKESİR BÜYÜKŞEHİR BELEDİYE ÖNÜ", "lat": 39.64684, "lng": 27.883903 },
    { "name": "BUCA GÖKSU MH/İZMİR", "lat": 38.367424, "lng": 27.148718 },
    { "name": "KARŞIYAKA ALAYBEY/İZMİR", "lat": 38.461388, "lng": 27.119285 },
    { "name": "BOSTANLI CENGİZ TOPEL CADDESİ KARŞIYAKA/İZMİR", "lat": 38.459095, "lng": 27.092903 },
    { "name": "TORBALI 3M MİGROS AVM/İZMİR", "lat": 38.183291, "lng": 27.352105 },
    { "name": "ATATÜRK BULVARI-EFELER/AYDIN", "lat": 37.84186, "lng": 27.833083 },
    { "name": "CUMHURİYET MEYDANI- BORNOVA/İZMİR", "lat": 38.465491, "lng": 27.219451 },
    { "name": "MORDOĞAN BELEDİYESİ/İZMİR", "lat": 38.518728, "lng": 26.625345 },
    { "name": "ADNAN MENDERES BUL./AYDIN", "lat": 37.845828, "lng": 27.84373 },
    { "name": "GERMENCİK İLÇESİ/AYDIN", "lat": 37.869656, "lng": 27.601823 }
        ];

        let userLat, userLng;
        let currentMarkers = [];
        let currentLocationMarker = null;
        const map = L.map('map').setView([38.4237, 27.1428], 10);
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Kullanıcı konumunu otomatik olarak al
        function getUserLocation() {
            return new Promise((resolve, reject) => {
                if ("geolocation" in navigator) {
                    navigator.geolocation.getCurrentPosition(
                        position => {
                            userLat = position.coords.latitude;
                            userLng = position.coords.longitude;
                            resolve({ lat: userLat, lng: userLng });
                        },
                        error => {
                            console.error('Konum alınamadı:', error);
                            // Varsayılan bir konum (örn. İzmir merkez)
                            userLat = 38.4237;
                            userLng = 27.1428;
                            resolve({ lat: userLat, lng: userLng });
                        }
                    );
                } else {
                    // Varsayılan konum
                    userLat = 38.4237;
                    userLng = 27.1428;
                    resolve({ lat: userLat, lng: userLng });
                }
            });
        }

        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // Dünya yarıçapı (km)
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        function sortLocationsByDistance(locations, userLat, userLng) {
            return locations.map(loc => ({
                ...loc,
                distance: calculateDistance(userLat, userLng, loc.lat, loc.lng)
            })).sort((a, b) => a.distance - b.distance);
        }

        function clearMarkers() {
            currentMarkers.forEach(marker => map.removeLayer(marker));
            currentMarkers = [];
        }

        function openGoogleMapsRoute(startLat, startLng, endLat, endLng) {
            const url = `https://www.google.com/maps/dir/?api=1&origin=${startLat},${startLng}&destination=${endLat},${endLng}&travelmode=driving`;
            window.open(url, '_blank');
        }

        function displayLocations(sortedLocations) {
            const locationList = document.getElementById('locationList');
            locationList.innerHTML = '';
            
            clearMarkers();

            // Eğer hiç lokasyon yoksa uyarı göster
            if (sortedLocations.length === 0) {
                locationList.innerHTML = '<div class="text-center text-muted">Eşleşen lokasyon bulunamadı.</div>';
                return;
            }

            sortedLocations.forEach(loc => {
                const div = document.createElement('div');
                div.classList.add('location-item', 'p-2');
                div.innerHTML = `
                    <div>
                        <strong>${loc.name}</strong>
                        <br>
                        <small class="text-muted">${loc.nameEn} - Mesafe: ${loc.distance.toFixed(2)} km</small>
                    </div>
                    <div>
                        <button class="btn btn-sm btn-primary route-btn" data-lat="${loc.lat}" data-lng="${loc.lng}">
                            Yol Tarifi
                        </button>
                    </div>
                `;
                
                // Konumu haritada göster
                div.querySelector('strong').onclick = () => showLocationOnMap(loc, div);
                
                // Yol tarifi butonu
                div.querySelector('.route-btn').onclick = async (e) => {
                    const userLocation = await getUserLocation();
                    openGoogleMapsRoute(
                        userLocation.lat, userLocation.lng, 
                        loc.lat, loc.lng
                    );
                };

                locationList.appendChild(div);

                // Haritada işaretçi oluştur
                const marker = L.marker([loc.lat, loc.lng])
                    .addTo(map)
                    .bindPopup(`
                        <strong>${loc.name}</strong><br>
                        ${loc.nameEn}<br>
                        Enlem: ${loc.lat}<br>
                        Boylam: ${loc.lng}<br>
                        Mesafe: ${loc.distance.toFixed(2)} km
                    `);
                currentMarkers.push(marker);
            });

            // İlk konumu seç
            if (sortedLocations.length > 0) {
                showLocationOnMap(sortedLocations[0]);
            }
        }

        function showLocationOnMap(location, element = null) {
            // Önceki vurgulu öğeyi kaldır
            document.querySelectorAll('.location-item').forEach(item => 
                item.classList.remove('highlight')
            );

            // Önceki kırmızı işaretçiyi kaldır
            if (currentLocationMarker) {
                map.removeLayer(currentLocationMarker);
            }

            // Şu anki öğeyi vurgula
            if (element) {
                element.classList.add('highlight');
            }

            // Haritayı konuma merkezle ve kırmızı işaretçi koy
            map.setView([location.lat, location.lng], 15);
            currentLocationMarker = L.marker([location.lat, location.lng], {
                icon: L.icon({
                    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
                    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
                    iconSize: [25, 41],
                    iconAnchor: [12, 41],
                    popupAnchor: [1, -34],
                    shadowSize: [41, 41]
                })
            }).addTo(map).bindPopup(location.name);
        }

        // Sayfa yüklendiğinde kullanıcı konumunu al ve varsayılan listeyi göster
        async function initPage() {
            const userLocation = await getUserLocation();
            map.setView([userLocation.lat, userLocation.lng], 10);

            // Varsayılan olarak tüm lokasyonları mesafeye göre sırala
            const sortedLocations = sortLocationsByDistance(allLocations, userLocation.lat, userLocation.lng);
            displayLocations(sortedLocations);
        }

        // Anlık arama fonksiyonu
        async function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            // Kullanıcı konumunu al
            const userLocation = await getUserLocation();
            
            // Filtreleme (Türkçe ve İngilizce isimlerde arama)
            const filteredLocations = allLocations.filter(loc => 
                loc.name.toLowerCase().includes(searchTerm) || 
                loc.nameEn.toLowerCase().includes(searchTerm)
            );
            
            // Mesafeye göre sırala
            const sortedLocations = sortLocationsByDistance(filteredLocations, userLocation.lat, userLocation.lng);
            
            // Sonuçları göster (maks 10 lokasyon)
            const limitedLocations = sortedLocations.slice(0, 10);
            displayLocations(limitedLocations);
        }

        // Arama inputuna anlık arama için event listener ekle
        document.getElementById('searchInput').addEventListener('input', performSearch);

        // Sayfa yüklendiğinde başlat
        window.onload = initPage;
    </script>
</body>
</html>
